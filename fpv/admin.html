<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>cs.txt 格式说明｜Flyz远征飞</title>
<link rel="icon" href="/favicon.ico" type="image/x-icon">
<script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
<script src="https://cdn.bootcdn.net/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<style>
* {
margin: 0;
padding: 0;
box-sizing: border-box;
}

:root {
--tech-blue: #0096FF;
--tech-dark: #0066CC;
--tech-light: #66CCFF;
--tech-gray: #F0F7FF;
--gold: #FFD700;
--red: #FF4444;
--text-main: #333333;
--text-light: #FFFFFF;
--shadow: 0 4px 20px rgba(0, 150, 255, 0.15);
--radius: 12px;
}

body {
font-family: system-ui, -apple-system, sans-serif;
background-color: #000814;
background-image:
linear-gradient(rgba(0, 150, 255, 0.1) 1px, transparent 1px),
linear-gradient(90deg, rgba(0, 150, 255, 0.1) 1px, transparent 1px);
background-size: 30px 30px;
color: var(--text-main);
min-height: 100vh;
padding: 20px 0;
position: relative;
overflow-x: hidden;
}

.page-container {
max-width: 1200px;
margin: 0 auto;
padding: 0 20px;
}

.header-logo {
display: flex;
align-items: center;
margin-bottom: 20px;
position: relative;
z-index: 10;
}

.logo-img {
width: 60px;
height: 60px;
border-radius: 10px;
box-shadow: 0 0 20px var(--tech-light);
transition: all 0.3s ease;
}

.logo-img:hover {
transform: rotate(5deg) scale(1.1);
box-shadow: 0 0 30px var(--tech-blue);
}

.logo-text-group {
margin-left: 15px;
}

.logo-domain {
font-size: 1.5rem;
color: var(--tech-blue);
font-weight: bold;
text-shadow: 0 0 15px var(--tech-light);
letter-spacing: 1px;
background: linear-gradient(90deg, var(--tech-light), var(--tech-blue));
-webkit-background-clip: text;
background-clip: text;
color: transparent;
animation: logoGlow 3s ease-in-out infinite;
}

@keyframes logoGlow {
0%, 100% { background-position: 0% 50%; }
50% { background-position: 100% 50%; }
}

.logo-slogan {
font-size: 1rem;
color: var(--tech-light);
text-shadow: 0 0 10px rgba(0, 150, 255, 0.3);
animation: sloganBreath 4s ease-in-out infinite;
}

@keyframes sloganBreath {
0%, 100% { opacity: 0.8; }
50% { opacity: 1; }
}

.page-title {
text-align: center;
font-size: 3rem;
color: var(--text-light);
margin: 10px 0 40px;
text-shadow: 0 0 25px var(--tech-light);
letter-spacing: 3px;
position: relative;
}

.page-title::after {
content: '';
display: block;
width: 120px;
height: 4px;
background: linear-gradient(90deg, transparent, var(--tech-blue), transparent);
margin: 15px auto 0;
border-radius: 2px;
}

.tab-nav {
display: flex;
justify-content: center;
gap: 20px;
margin-bottom: 40px;
flex-wrap: wrap;
}

.tab-btn {
padding: 14px 40px;
background-color: rgba(255, 255, 255, 0.05);
border: 2px solid var(--tech-blue);
border-radius: 50px;
font-size: 1.2rem;
color: var(--text-light);
cursor: pointer;
transition: all 0.4s ease;
backdrop-filter: blur(10px);
position: relative;
overflow: hidden;
}

.tab-btn::before {
content: '';
position: absolute;
top: 0;
left: -100%;
width: 100%;
height: 100%;
background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
transition: left 0.6s ease;
}

.tab-btn.active {
background-color: var(--tech-blue);
box-shadow: 0 0 30px var(--tech-light);
}

.tab-btn:hover:not(.active) {
transform: translateY(-3px);
border-color: var(--tech-light);
box-shadow: 0 0 20px rgba(102, 204, 255, 0.4);
}

.tab-btn:hover::before {
left: 100%;
}

.tab-content {
display: none;
background-color: rgba(255, 255, 255, 0.95);
border-radius: var(--radius);
padding: 40px;
box-shadow: var(--shadow);
margin-bottom: 40px;
border: 1px solid rgba(0, 150, 255, 0.3);
position: relative;
overflow: hidden;
}

.tab-content::before {
content: '';
position: absolute;
top: 0;
left: 0;
width: 100%;
height: 4px;
background: linear-gradient(90deg, var(--tech-blue), var(--tech-light));
}

.tab-content.active {
display: block;
animation: fadeInUp 0.6s ease-out;
}

@keyframes fadeInUp {
from { opacity: 0; transform: translateY(30px); }
to { opacity: 1; transform: translateY(0); }
}

.section-title {
font-size: 2rem;
color: var(--tech-dark);
margin-bottom: 30px;
text-align: center;
font-weight: 600;
}

.section-title::after {
content: '';
display: block;
width: 60px;
height: 3px;
background-color: var(--tech-blue);
margin: 12px auto 0;
border-radius: 3px;
}

.data-table {
width: 100%;
border-collapse: separate;
border-spacing: 0;
border-radius: var(--radius);
overflow: hidden;
box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
}

.data-table th {
background: linear-gradient(90deg, var(--tech-dark), var(--tech-blue));
color: var(--text-light);
padding: 18px;
font-size: 1.15rem;
text-align: center;
letter-spacing: 1px;
position: relative;
}

.data-table th::after {
content: '';
position: absolute;
bottom: 0;
left: 0;
width: 100%;
height: 2px;
background: linear-gradient(90deg, transparent, var(--tech-light), transparent);
animation: headerShine 2s ease-in-out infinite;
}

@keyframes headerShine {
0%, 100% { opacity: 0.5; }
50% { opacity: 1; }
}

.data-table td {
padding: 18px;
text-align: center;
font-size: 1.05rem;
border-bottom: 1px solid rgba(0, 150, 255, 0.1);
transition: all 0.3s ease;
}

.data-table tr:last-child td {
border-bottom: none;
}

.data-table tr:hover {
background-color: var(--tech-gray);
transform: scale(1.01);
box-shadow: 0 3px 10px rgba(0, 150, 255, 0.1);
}

.rank-1 {
background: linear-gradient(120deg, #FFF8DC, #FFD700);
}

.rank-2 {
background: linear-gradient(120deg, #e6f7ff, #b3d9ff);
}

.rank-3 {
background: linear-gradient(120deg, #f3e6ff, #d9b3ff);
}

.btn-group {
display: flex;
justify-content: center;
gap: 20px;
margin-top: 30px;
}

.btn {
padding: 12px 30px;
border-radius: 50px;
border: none;
font-size: 1.1rem;
cursor: pointer;
transition: all 0.3s ease;
}

.export-btn {
background: linear-gradient(90deg, var(--tech-dark), var(--tech-blue));
color: white;
box-shadow: 0 3px 10px rgba(0, 150, 255, 0.3);
}

.export-btn:hover {
transform: translateY(-3px);
box-shadow: 0 6px 15px rgba(0, 150, 255, 0.4);
}

.modal {
position: fixed;
top: 0;
left: 0;
width: 100vw;
height: 100vh;
background-color: rgba(0, 8, 20, 0.85);
backdrop-filter: blur(10px);
z-index: 1000;
display: none;
align-items: center;
justify-content: center;
padding: 20px;
}

.modal.show {
display: flex;
animation: modalFade 0.4s ease-out;
}

@keyframes modalFade {
from { opacity: 0; }
to { opacity: 1; }
}

.modal-content {
background-color: rgba(255, 255, 255, 0.98);
border-radius: var(--radius);
padding: 30px;
width: 100%;
max-width: 800px;
max-height: 80vh;
overflow-y: auto;
box-shadow: 0 10px 40px rgba(0, 150, 255, 0.25);
border: 1px solid rgba(0, 150, 255, 0.3);
position: relative;
}

.modal-content::before {
content: '';
position: absolute;
top: 0;
left: 0;
width: 100%;
height: 3px;
background: linear-gradient(90deg, var(--tech-blue), var(--tech-light));
}

.modal-title {
font-size: 1.9rem;
color: var(--tech-dark);
margin-bottom: 25px;
text-align: center;
}

.notice-content {
font-size: 1.1rem;
line-height: 1.8;
color: #333;
white-space: pre-wrap;
word-wrap: break-word;
word-break: normal;
}

.notice-btn-group {
display: flex;
justify-content: center;
margin-top: 30px;
}

.close-notice {
padding: 12px 30px;
border-radius: 50px;
border: none;
font-size: 1.1rem;
cursor: pointer;
background: linear-gradient(90deg, var(--tech-dark), var(--tech-blue));
color: white;
box-shadow: 0 3px 10px rgba(0, 150, 255, 0.3);
}

footer {
width: 100%;
padding: 26px 0;
text-align: center;
font-size: 1.1rem;
color: #66CCFF;
text-shadow: 0 0 15px rgba(0, 150, 255, 0.6);
margin-top: 60px;
border-top: 1px solid rgba(0, 150, 255, 0.3);
background: rgba(0, 8, 20, 0.7);
backdrop-filter: blur(12px);
position: relative;
z-index: 5;
}

.footer-main {
font-size: 1.25rem;
font-weight: bold;
margin-bottom: 8px;
letter-spacing: 1px;
}

.footer-sub {
font-size: 0.95rem;
opacity: 0.92;
}

.feedback-btn {
position: fixed;
top: 20px;
right: 20px;
width: 60px;
height: 60px;
border-radius: 50%;
background: linear-gradient(135deg, var(--tech-blue), var(--tech-dark));
color: white;
display: flex;
align-items: center;
justify-content: center;
font-size: 24px;
box-shadow: 0 5px 20px rgba(0, 150, 255, 0.4);
cursor: pointer;
z-index: 999;
transition: all 0.3s ease;
}

.feedback-btn:hover {
transform: rotate(15deg) scale(1.1);
box-shadow: 0 8px 25px rgba(0, 150, 255, 0.5);
}

.feedback-modal .modal-content {
max-width: 600px;
}

.more-info-btn {
display: block;
width: fit-content;
margin: 20px auto 0;
padding: 10px 25px;
background: linear-gradient(90deg, var(--tech-dark), var(--tech-blue));
color: white;
border-radius: 50px;
text-decoration: none;
font-size: 1.1rem;
box-shadow: 0 3px 10px rgba(0, 150, 255, 0.3);
transition: all 0.3s ease;
}

.more-info-btn:hover {
transform: translateY(-3px);
box-shadow: 0 6px 15px rgba(0, 150, 255, 0.4);
}

#export-container {
position: fixed;
top: -9999px;
left: -9999px;
background:#fff;
width:1200px;
padding:40px;
border-radius:12px;
}

@media (max-width: 768px) {
.logo-img {
width: 50px;
height: 50px;
}

.logo-domain {
font-size: 1.2rem;
}

.logo-slogan {
font-size: 0.9rem;
}

.page-title {
font-size: 2.2rem;
}

.modal-content {
max-width: 95%;
padding: 20px;
}

.data-table th, .data-table td {
padding: 12px 8px;
font-size: 0.9rem;
}

.btn {
padding: 10px 20px;
font-size: 1rem;
}

.feedback-btn {
width: 50px;
height: 50px;
font-size: 20px;
}
}
</style>
</head>

<body>
<div class="page-container">
<div class="header-logo">
<img src="https://img520.com/UIGuUV.jpeg" class="logo-img">
<div class="logo-text-group">
<div class="logo-domain">917813.com.cn</div>
<div class="logo-slogan">Flyz远征飞｜为方便模友而生</div>
</div>
</div>

<h1 class="page-title">cs.txt 格式说明 & 调取逻辑演示</h1>

<div class="tab-nav">
<button class="tab-btn active" data-tab="format-tab">格式说明</button>
<button class="tab-btn" data-tab="demo-tab">调取演示</button>
</div>

<div class="tab-content active" id="format-tab">
<h2 class="section-title">cs.txt 格式说明</h2>

<table class="data-table">
<thead>
<tr>
<th>序号</th>
<th>字段名称</th>
<th>示例</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>比赛ID</td>
<td>PID001</td>
<td>唯一标识</td>
</tr>
<tr>
<td>2</td>
<td>Steam ID</td>
<td>Steam_123456</td>
<td>选手 Steam 账号</td>
</tr>
<tr>
<td>3</td>
<td>初赛成绩</td>
<td>0:27:415</td>
<td>格式：分:秒:毫秒</td>
</tr>
<tr>
<td>4</td>
<td>复赛成绩</td>
<td>0:30:120</td>
<td>同上</td>
</tr>
<tr>
<td>5</td>
<td>决赛成绩</td>
<td>0:25:999</td>
<td>同上</td>
</tr>
<tr>
<td>6</td>
<td>微信ID</td>
<td>wxid_xxxx</td>
<td>用于联系</td>
</tr>
<tr>
<td>7</td>
<td>报名状态</td>
<td>已报名</td>
<td>已报名 / 未报名</td>
</tr>
</tbody>
</table>

<div style="margin-top:30px; font-size:1.1rem; color:#555; text-align:center;">
一行完整示例：<br>
PID001=Steam_123456=0:27:415=0:30:120=0:25:999=wxid_xxxx=已报名
</div>
</div>

<div class="tab-content" id="demo-tab">
<h2 class="section-title">cs.txt 调取演示（真实读取 /fpv/cs.txt）</h2>

<table class="data-table">
<thead>
<tr>
<th>排名</th>
<th>比赛ID</th>
<th>Steam ID</th>
<th>初赛成绩</th>
<th>复赛成绩</th>
<th>决赛成绩</th>
<th>微信ID</th>
<th>报名状态</th>
</tr>
</thead>
<tbody id="cs-list">
<tr>
<td colspan="8" style="color:var(--tech-blue); padding:40px;">加载中...</td>
</tr>
</tbody>
</table>

<div class="btn-group">
<button class="btn export-btn" onclick="exportToImage()">导出成绩为图片</button>
</div>
</div>
</div>

<footer>
<div class="footer-main">
天津魄客创新（科技）有限公司 · PokRC 团队
</div>
<div class="footer-sub">
微型 250g 无人机极速世界纪录保持者 · 全力支持本次赛事
</div>
</footer>

<div class="modal" id="notice-modal">
<div class="modal-content">
<h3 class="modal-title">格式说明</h3>
<div class="notice-content">
cs.txt 每一行格式如下：
比赛ID=SteamID=初赛成绩=复赛成绩=决赛成绩=微信ID=报名状态
</div>
<div class="notice-btn-group">
<button class="close-notice" onclick="closeModal('notice-modal')">关闭</button>
</div>
</div>
</div>

<div class="modal feedback-modal" id="feedback-modal">
<div class="modal-content">
<h3 class="modal-title">反馈与帮助</h3>
<div class="notice-content" style="text-align:center; font-size:1.2rem; line-height:2;">
反馈成绩问题、信息不全或报名问题<br><br>
请加微信号：<strong style="color:var(--tech-blue);">YGWFK2024</strong><br><br>
或在交流群内反馈<br>
加微信拉你进赛事交流群<br><br>
<a href="/index" class="more-info-btn">点我了解更多赛事信息</a>
</div>
<div class="notice-btn-group">
<button class="close-notice" onclick="closeModal('feedback-modal')">关闭</button>
</div>
</div>
</div>

<div id="export-container"></div>

<div class="feedback-btn" onclick="openModal('feedback-modal')">
❗
</div>

<script>
$(document).ready(function() {
$('.tab-btn').click(function() {
const tabId = $(this).attr('data-tab');
$('.tab-btn').removeClass('active');
$(this).addClass('active');
$('.tab-content').removeClass('active');
$('#' + tabId).addClass('active');
if (tabId === 'demo-tab') loadCS();
});

openModal('notice-modal');
});

function openModal(modalId) {
document.getElementById(modalId).classList.add('show');
}

function closeModal(modalId) {
document.getElementById(modalId).classList.remove('show');
}

function loadCS() {
$.get('/fpv/cs.txt', function(data) {
const lines = data.split('\n').map(line => line.trim()).filter(line => line);
const list = [];

lines.forEach(line => {
const parts = line.split('=');
if (parts.length < 7) return;

list.push({
pid: parts[0],
steam: parts[1],
cs: parts[2] || '无成绩',
fs: parts[3] || '无成绩',
js: parts[4] || '无成绩',
wechat: parts[5] || '未填写',
status: parts[6] || '未报名',
timeMs: scoreToMs(parts[2])
});
});

list.sort((a, b) => {
if (a.timeMs === null) return 1;
if (b.timeMs === null) return -1;
return a.timeMs - b.timeMs;
});

const tbody = $('#cs-list');
tbody.empty();

list.forEach((item, index) => {
let cls = '';
if (index === 0) cls = 'rank-1';
if (index === 1) cls = 'rank-2';
if (index === 2) cls = 'rank-3';

tbody.append(`
<tr class="${cls}">
<td>${index + 1}</td>
<td>${item.pid}</td>
<td>${item.steam}</td>
<td>${item.cs}</td>
<td>${item.fs}</td>
<td>${item.js}</td>
<td>${item.wechat}</td>
<td>${item.status}</td>
</tr>
`);
});
}).fail(function() {
$('#cs-list').html(`
<tr>
<td colspan="8" style="color:var(--tech-blue); padding:40px;">
加载失败，请检查 /fpv/cs.txt
</td>
</tr>
`);
});
}

function scoreToMs(score) {
if (!score || score === '无成绩') return null;
const parts = score.split(':');
if (parts.length !== 3) return null;
const min = parseInt(parts[0]) || 0;
const sec = parseInt(parts[1]) || 0;
const ms = parseInt(parts[2]) || 0;
return min * 60000 + sec * 1000 + ms;
}

function exportToImage() {
const container = $('#export-container');
const table = $('.data-table')[0].outerHTML;

container.html(`
<div style="text-align:center; margin-bottom:20px;">
<h2 style="color:#0066CC; font-size:1.8rem;">Flyz远征飞2026赛事成绩</h2>
<p style="color:#666; margin-top:10px;">导出时间：${new Date().toLocaleString()}</p>
</div>
${table}
`);

html2canvas(container[0], { scale: 2, useCORS: true }).then(canvas => {
const link = document.createElement('a');
link.href = canvas.toDataURL('image/png', 1.0);
link.download = `Flyz成绩_${new Date().getTime()}.png`;
link.click();
alert('导出成功！');
});
}
</script>

</body>
</html>
